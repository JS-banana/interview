# this

## 从执行上下文说起

首先，说起 this就离不开执行上下文。

执行上下文的基本概念，拿过来看看：

- **全局执行上下文**：一个程序中只会存在一个全局上下文，全局上下文会生成一个全局对象（以浏览器环境为例，这个全局对象是 window），并且将 this 值绑定到这个全局对象上。它在整个 javascript 脚本的生命周期内都会存在于执行堆栈的最底部不会被栈弹出销毁
- **函数执行上下文**：每当一个函数被调用时，都会创建一个新的函数执行上下文（不管这个函数是不是被重复调用的）

这里我们针对函数看，可以发现一点：

函数在被调用时，会创建一个执行上下文，即 this的值在调用的时候被确定

> 因此，这里也会涉及到改变 this的几个基本方法，如：bind、call、apply

**当前可执行代码块的调用者（this）**：如果当前函数被作为对象方法调用或使用 `bind` `call` `apply` 等 API 进行委托调用，则将当前代码块的调用者信息（`this value`）存入当前执行上下文，否则默认为全局对象调用。

<!-- 在执行上下文中，我们了解到，在 **创建阶段**会发生三个行为，分别是：`创建词法环境`、`创建变量环境`，以及确定 `this值的绑定` -->

<!-- bind只生效一次 -->

## 基本概念

1. this是JavaScript的关键字之一。它是 对象 自动生成的一个内部对象，只能在 对象 内部使用。随着函数使用场合的不同，this的值会发生变化。
2. this指向什么，完全取决于 什么地方以什么方式调用，而不是 创建时。

## this的四种绑定规则

- 默认绑定：在函数调用时，this的值为全局对象（一般是window上，严格模式下 是undefined）
- 隐性绑定：在函数调用时，this的值为函数调用时所在的对象，即函数的执行上下文
- 显性绑定：`call`、 `apply`、 `bind`
- new 绑定：在 `new` 关键字调用函数时，this的值为新创建的对象

this绑定优先级：new 绑定 > 显示绑定 > 隐式绑定 > 默认绑定

## 资料

- [深入理解 js this 绑定](https://segmentfault.com/a/1190000011194676)
