# JS类型与类型判断

## JS类型

最新的 ECMAScript 标准定义了 8 种数据类型:

- 7种原始类型：Number、String、Boolean、Null、Undefined、BigInt、Symbol
- Object：几乎所有通过 new 创建的（Array、Object、Date、Function、RegExp、Error、Map、Set、WeakMap、WeakSet）

### 特别注意

- typeof null === "object"

typeof 是依据标记位判断类型的，而

值以32位为单位存储，由小型标签（1-3位）和值的实际数据组成。类型标签存储在单元的低位中。

- 000: object. 数据是对象的引用。
- 1: int. 数据是31位有符号整数。
- 010: double. 数据是对双浮点数的引用。
- 100: string. 数据是对字符串的引用。
- 110: boolean. 数据是布尔值。

两个特殊：

- undefined（JSVAL_VOID）是整数−2^30（整数范围之外的数字）
- null(JSVAL_NULL) 为机器码NULL的空指针，或者说：为0的object类型标签。

在判断数据类型时，是根据机器码低位标识来判断的，而null的机器码标识为全0，而对象的机器码低位标识为000。所以typeof null的结果被误判为Object。

这也就是为什么Number(null)===0吧...

- typeof可以检测出函数类型

```js
function a() {}

console.log(typeof a); // function
```

## JS类型判断

### typeof

typeof 主要是检查数据类型，即这8种数据类型，所有对于Object类型无法检测，比较合适的方式是使用 instanceof 关键字

返回值均为**小写字符串**：如 `typeof undefined === "undefined"`、`typeof {} === "object"`

### Object.prototype.toString

## 资料

- [JavaScript 数据类型和数据结构](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures)
- [JavaScript专题之类型判断](https://github.com/mqyqingfeng/Blog/issues/28)
- [为什么JavaScript里面typeof(null)的值是"object"？](https://www.zhihu.com/question/21691758)
- [【译】谈谈“typeof null为object”这一bug的由来](https://juejin.cn/post/6844903841952071693)
