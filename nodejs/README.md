# NodeJs

## 单线程

单线程指的其实是**主线程**，主线程负责调度其他任务，如网络请求、异步任务等，NodeJs的I/O操作都是异步的，这里的I/O可以是多线程的，主线程会直接从线程池里拿出一个线程来处理这个事件。

可以理解事件循环（Event Loop）

主线程通过维护一个事件队列（Event queue），不停的循环读取事件，

- 非I/O事件，主线程亲自处理
- I/O事件，线程池里取个线程去处理

对应的会指定回调函数，当任务完成后，就执行指定的回调函数，并把这个完成的事件放到事件队列的尾部，线程归还给线程池，等待事件循环。当主线程再次循环到该事件时，就直接处理并返回给上层调用。 这个过程就叫 事件循环 (Event Loop)。

## 资料

- [浅析 Node 进程与线程](https://juejin.cn/post/6844904033640169486)
- [解秘 Node.js 单线程实现高并发请求原理，以及串联同步执行并发请求的方案](https://segmentfault.com/a/1190000039682723)
